# The Neural Network (Event Router & Scheduler) v0.001

## 목적 (Purpose)
오버마인드의 신경망은 외부 자극(Event)과 내부 스케줄(정기/비정기 작업)을 수집하여 뇌(Brain)와 일벌레(Worker)에게 전달하는 초경량 메시징 및 라우팅 시스템입니다. v0.001에서는 Redis나 RabbitMQ 같은 무거운 외부 의존성 없이, 언어 내장 비동기 큐와 프로세스를 활용하여 가장 빠르고 단순하게 동작합니다.

## 핵심 컴포넌트 (Core Components)

### 1. 인메모리 이벤트 버스 (In-Memory Event Bus)
*   무거운 브로커 시스템 대신, Python의 `asyncio.Queue` (또는 Node.js의 `EventEmitter`)를 활용한 단일 프로세스 내의 메시지 큐입니다.
*   모든 자극(명령, 시스템 로그, 타이머 이벤트)은 이 버스로 집중됩니다.

### 2. 스케줄러 (Scheduler)
*   **정기/일시적 자극 생성기:** 단순한 `while` 루프와 `asyncio.sleep`, 혹은 가벼운 스케줄링 라이브러리(`schedule` 등)를 사용하여 주기적인 이벤트("일일 회고 시작", "상태 체크")를 이벤트 버스에 발행(Publish)합니다.

### 3. 지능형 라우터 (Intelligent Router)
*   **역할:** 이벤트 버스에서 메시지를 꺼내어(Consume), "이 자극을 누구에게 보낼 것인가"를 판단하는 문지기입니다.
*   **판단 로직 (LLM 연동):** 단순한 if-else 조건문뿐만 아니라, 예측 불가능하거나 복잡한 텍스트/이벤트의 경우 **Gemini CLI (또는 API)**를 즉각적으로 호출하여 라우팅 판단을 위임합니다.
    *   *예시 프롬프트:* `"이 로그(에러 로그)를 받았어. 이건 Brain이 깊게 고민해야 할 문제야, 아니면 Worker가 단순히 재시작해야 할 문제야?"*
*   **방향 전환:** 
    1.  고도의 추론이 필요한 경우 -> **Brain(중심핵)**으로 전달.
    2.  단순하고 기계적인 행동이 필요한 경우 -> **Worker(일벌레)** 영역으로 직접 전달 (예: 파일 읽기, 명령어 실행 등).

## v0.001 동작 흐름 (Data Flow)

1.  **자극 발생:** 사용자 명령(CLI 입력), 정기적 타이머 발송, 파일 변경 감지 이벤트가 발생합니다.
2.  **큐 적재 (Enqueue):** 발생한 이벤트 객체(Type, Payload)가 In-Memory Queue에 담깁니다.
3.  **라우터의 판단 (Router Judgment):** 가동 중인 라우터 데몬이 큐에서 이벤트를 팝(Pop)합니다. 라우터는 이벤트의 메타데이터를 확인하고, 내용이 모호할 경우 **Gemini 로직**을 통해 이 이벤트의 목적지와 중요도를 수초 내에 결정합니다.
4.  **전달 (Dispatch):** 
    *   목적지가 Brain이라면 깊은 사고력 프로세스를 호출합니다.
    *   목적지가 Worker라면 직접 CLI 환경이나 스크립트 실행으로 연결합니다.

## 향후 진화 방향 (Future Evolution)
*   군단의 규모(프로세스 수, 처리량)가 커짐에 따라 현재의 인메모리 큐를 Redis 등의 분산형 큐 시스템으로 자연스럽게 전환할 수 있도록 추상화(Abstraction) 레이어를 유지합니다.
